from control.matlab import *

def model_fmu_dynamics():
    """
    系统动态特性模型
    Returns:

    """
    # 传递函数
    s = tf("s")
    # 预测时域Np
    Np = 700
    # 控制时域Nc
    Nc = 150

    # EER模型: Q=13000kW
    tf11_1 = (-0.9588 * s ** 3 - 0.000365 * s ** 2 - 1.534 * 10 ** (-6) * s + 3.493 * 10 ** (-11)) / \
             (s ** 3 + 0.0009529 * s ** 2 + 1.034 * 10 ** (-6) * s + 3.263 * 10 ** (-10))
    tf12_1 = (-0.001176 * s ** 3 + 0.0001242 * s ** 2 + 1.089 * 10 ** (-7) * s - 4.437 * 10 ** (-11)) / \
             (s ** 3 + 0.009892 * s ** 2 + 5.183 * 10 ** (-5) * s + 6.968 * 10 ** (-8))
    tf13_1 = (-0.0006549 * s - 1.063 * 10 ** (-6)) / (s + 0.001583)
    tf14_1 = (0.0006289*s+2.518*10**(-6))/(s+0.002324)
    # Tei模型: Q=13000kW
    # tf21_1 = (0.4132 * s + 0.2477) / (s + 0.2488) * exp(-4800 * s)
    # tf22_1 = (-0.002007 * s ** 2 - 5.994 * 10 ** (-7) * s - 9.205 * 10 ** (-10)) / \
    #          (s ** 2 + 0.0003393 * s + 4.912 * 10 ** (-7)) * exp(-1800 * s)
    tf21_1 = ((0.4132 * s + 0.2477) / (s + 0.2488)) * (1 / (4800 * s + 1))
    tf22_1 = ((-0.002007 * s ** 2 - 5.994 * 10 ** (-7) * s - 9.205 * 10 ** (-10)) /
              (s ** 2 + 0.0003393 * s + 4.912 * 10 ** (-7))) * (1 / (1800 * s + 1))
    tf23_1 = 0 / 1
    tf24_1 = 0 / 1
    # 13000kW模型列表
    tf1_EER_list = [[tf11_1, tf12_1, tf13_1, tf14_1]]
    tf1_Tei_list = [[tf21_1, tf22_1, tf23_1, tf24_1]]
    tf1_list = [tf1_EER_list[0], tf1_Tei_list[0]]
    # 13000kW权值列表

    # EER模型: Q=11000kW
    tf11_2 = (-0.937 * s ** 2 - 0.000606 * s - 2.874 * 10 ** (-8)) / (s ** 2 + 0.0002834 * s + 1.526 * 10 ** (-7))
    # tf12_2 = (-0.0006065 * s - 3.366 * 10 ** (-7)) / (s + 0.0006914) * exp(-2400 * s)
    tf12_2 = ((-0.0006065 * s - 3.366 * 10 ** (-7)) / (s + 0.0006914)) * (1 / (2400 * s + 1))
    tf13_2 = (-0.0005296 * s - 1.07 * 10 ** (-6)) / (s + 0.002097)
    tf14_2 = (0.0008114 * s + 1.852 * 10 ** (-6)) / (s + 0.001418)
    # Tei模型: Q=11000kW
    # tf21_2 = (0.9507 * s + 0.01279) / (s + 0.01285) * exp(-6000 * s)
    # tf22_2 = (-0.002393 * s - 7.264 * 10 ** (-7)) / (s + 0.0003096) * exp(-2400 * s)
    tf21_2 = ((0.9507 * s + 0.01279) / (s + 0.01285)) * (1 / (6000 * s + 1))
    tf22_2 = ((-0.002393 * s - 7.264 * 10 ** (-7)) / (s + 0.0003096)) * (1 / (2400 * s + 1))
    tf23_2 = 0 / 1
    tf24_2 = 0 / 1
    # 11000kW模型列表
    tf2_EER_list = [[tf11_2, tf12_2, tf13_2, tf14_2]]
    tf2_Tei_list = [[tf21_2, tf22_2, tf23_2, tf24_2]]
    tf2_list = [tf2_EER_list[0], tf2_Tei_list[0]]
    # 11000kW权值列表

    # EER模型: Q=9000kW
    tf11_3 = (-1.015 * s ** 2 - 0.000329 * s - 6.155 * 10 ** (-8)) / \
             (s ** 2 + 8.71 * 10 ** (-5) * s + 1.322 * 10 ** (-7))
    tf12_3 = (0.002177 * s ** 3 + 1.902 * 10 ** (-6) * s ** 2 + 1.196 * 10 ** (-8) * s - 3.923 * 10 ** (-13)) / \
             (s ** 3 + 0.001535 * s ** 2 + 3.553 * 10 ** (-6) * s + 2.462 * 10 ** (-9))
    tf13_3 = (-0.0002741 * s - 0.0001954) / (s + 0.8243)
    tf14_3 = (0.0006958 * s + 1.817 * 10 ** (-6)) / (s + 0.001414)
    # Tei模型: Q=9000kW
    # tf21_3 = (0.713 * s + 0.009071) / (s + 0.009125) * exp(-6600 * s)
    # tf22_3 = (-0.002064 * s ** 3 - 2.594 * 10 ** (-6) * s ** 2 - 6.333 * 10 ** (-9) * s - 1.496 * 10 ** (-12)) / \
    #          (s ** 3 + 0.0007392 * s ** 2 + 2.759 * 10 ** (-6) * s + 5.558 * 10 ** (-10)) * exp(-2400 * s)
    tf21_3 = ((0.713 * s + 0.009071) / (s + 0.009125)) * (1 / (6600 * s + 1))
    tf22_3 = ((-0.002064 * s ** 3 - 2.594 * 10 ** (-6) * s ** 2 - 6.333 * 10 ** (-9) * s - 1.496 * 10 ** (-12)) /
              (s ** 3 + 0.0007392 * s ** 2 + 2.759 * 10 ** (-6) * s + 5.558 * 10 ** (-10))) * (1 / (2400 * s + 1))
    tf23_3 = 0 / 1
    tf24_3 = 0 / 1
    # 9000kW模型列表
    tf3_EER_list = [[tf11_3, tf12_3, tf13_3, tf14_3]]
    tf3_Tei_list = [[tf21_3, tf22_3, tf23_3, tf24_3]]
    tf3_list = [tf3_EER_list[0], tf3_Tei_list[0]]
    # 9000kW权值列表

    # EER模型: Q=7500kW
    tf11_4 = (-0.903 * s ** 3 + 0.0002535 * s ** 2 - 6.69 * 10 ** (-7) * s + 6.655 * 10 ** (-11)) / \
             (s ** 3 + 1.697 * 10 ** (-5) * s ** 2 + 5.569 * 10 ** (-7) * s + 8.981 * 10 ** (-21))
    tf12_4 = (0.002968 * s ** 3 + 2.118 * 10 ** (-6) * s ** 2 + 1.545 * 10 ** (-8) * s - 2.033 * 10 ** (-13)) / \
             (s ** 3 + 0.001769 * s ** 2 + 3.319 * 10 ** (-6) * s + 1.94 * 10 ** (-9))
    tf13_4 = (-0.0005676 * s - 1.122 * 10 ** (-7)) / (s + 0.0001852)
    tf14_4 = (0.0003312 * s + 1.894 * 10 ** (-6)) / (s + 0.001875)
    # Tei模型: Q=7500kW
    # tf21_4 = (0.949 * s + 0.006319) / (s + 0.006362) * exp(-7800 * s)
    # tf22_4 = (-0.002566 * s - 1.993 * 10 ** (-6)) / (s + 0.0007493) * exp(-3000 * s)
    tf21_4 = ((0.949 * s + 0.006319) / (s + 0.006362)) * (1 / (7800 * s + 1))
    tf22_4 = ((-0.002566 * s - 1.993 * 10 ** (-6)) / (s + 0.0007493)) * (1 / (3000 * s + 1))
    tf23_4 = 0 / 1
    tf24_4 = 0 / 1
    # 7500kW模型列表
    tf4_EER_list = [[tf11_4, tf12_4, tf13_4, tf14_4]]
    tf4_Tei_list = [[tf21_4, tf22_4, tf23_4, tf24_4]]
    tf4_list = [tf4_EER_list[0], tf4_Tei_list[0]]
    # 7500kW权值列表

    # 模型列表
    Np_list = [Np, Np, Np, Np]
    Nc_list = [Nc, Nc, Nc, Nc]
    model_EER_list = [tf1_EER_list, tf2_EER_list, tf3_EER_list, tf4_EER_list]
    model_Tei_list = [tf1_Tei_list, tf2_Tei_list, tf3_Tei_list, tf4_Tei_list]
    model_list = [tf1_list, tf2_list, tf3_list, tf4_list]

    # 返回结果
    return model_list, model_EER_list, model_Tei_list, Np_list, Nc_list